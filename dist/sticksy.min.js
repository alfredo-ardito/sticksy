window.Sticksy=function(){"use strict";var o="static",i="fixed",n="stuck",s=[];function t(t,i){if(!t)throw new Error("You have to specify target parameter");var n=e.findElement(t);if(!n)throw new Error("Cannot find target element: "+t);var o=n.parentNode;if(!o)throw new Error("Cannot find container of target element: "+t);i=i||{},this.t={containerEl:o,targetEl:n,topSpacing:i.topSpacing||0,listen:i.listen||!1},this.onStateChanged=null,s.push(this),this.i(this.t)}t.prototype.i=function(){var i=this;this.state=o,this.o=[],this.s=[];for(var t=this.t.targetEl;t;){var n=t.cloneNode(!0);n.style.visibility="hidden",n.className+=" sticksy-dummy-node",n.removeAttribute("id"),this.t.targetEl.parentNode.insertBefore(n,this.t.targetEl),this.o.push(t),this.s.push(n),t=t.nextElementSibling}(this.h=0,this.u={top:0,bottom:0},this.t.containerEl.style.position="relative",this.l=-1===getComputedStyle(this.t.containerEl).display.indexOf("flex"),this.hardRefresh(),this.t.listen)&&new MutationObserver(function(t){t.forEach(function(t){-1!==i.o.indexOf(t.target)&&"style"===t.attributeName||i.hardRefresh()})}).observe(this.t.containerEl,{attributes:!0,characterData:!0,childList:!0,subtree:!0})},t.prototype.v=function(t){return t<this.u.top?o:t>=this.u.bottom?n:i},t.prototype.p=function(){this.h=e.getComputedBox(this.o[this.o.length-1]).bottomWithMargin-e.getComputedBox(this.o[0]).topWithMargin},t.prototype.m=function(){var t=this.t.containerEl,i=this.o,n=e.getComputedBox(t),o=e.getComputedBox(i[0]);this.u={top:o.topWithMargin-this.t.topSpacing,bottom:n.bottom-n.paddingBottom-this.t.topSpacing-this.h}},t.prototype.refresh=function(){var t=this.v(window.pageYOffset,this.u);t!==this.state&&(t===o?(this.g(this.o),this.C(this.s)):(this.S(this.o),t===i?this.M(this.o):this.j(this.o),this.k(this.s)),this.state=t,"function"==typeof this.onStateChanged&&this.onStateChanged(t))},t.prototype.hardRefresh=function(){this.state=o,this.C(this.s),this.g(this.o),this.S(this.o),this.p(),this.m(),this.refresh()},t.prototype.M=function(t){for(var i=0,n=this.t.topSpacing,o=0;o<t.length;o++){var s=t[o],h=e.getComputedBox(s),r=this.l?Math.max(0,i-h.marginTop):i;s.style.position="fixed",s.style.top=n+r+"px",s.style.bottom="",n+=h.height+h.marginTop+r,i=h.marginBottom}},t.prototype.j=function(t){for(var i=0,n=e.getComputedBox(this.t.containerEl).paddingBottom,o=t.length-1;0<=o;o--){var s=t[o],h=e.getComputedBox(s),r=this.l?Math.max(0,i-h.marginBottom):i;s.style.position="absolute",s.style.top="auto",s.style.bottom=n+r+"px",n+=h.height+h.marginBottom+r,i=h.marginTop}},t.prototype.g=function(t){t.forEach(function(t){t.style.position="",t.style.top="",t.style.bottom="",t.style.height="",t.style.width=""})},t.prototype.C=function(t){t.forEach(function(t){t.style.display="none"})},t.prototype.k=function(t){for(var i=0;i<t.length;i++)t[i].style.display=getComputedStyle(this.o[i]).display},t.prototype.S=function(){for(var t=0;t<this.o.length;t++){var i=this.o[t],n=getComputedStyle(i);i.style.width=n.width,i.style.height=n.height}},t.refreshAll=function(){for(var t=0;t<s.length;t++)s[t].refresh()},t.hardRefreshAll=function(){for(var t=0;t<s.length;t++)s[t].hardRefresh()},window.addEventListener("scroll",t.refreshAll),window.addEventListener("resize",t.hardRefreshAll);var e={parseNumber:function(t){return parseFloat(t)||0},findElement:function(t,i){return i||(i=document),"string"==typeof t?i.querySelector(t):t instanceof Element?t:void 0},getComputedBox:function(t){var i=t.getBoundingClientRect(),n=getComputedStyle(t);return{height:i.height,width:i.width,top:window.pageYOffset+i.top,bottom:window.pageYOffset+i.bottom,marginTop:e.parseNumber(n.marginTop),marginBottom:e.parseNumber(n.marginBottom),paddingTop:e.parseNumber(n.paddingTop),paddingBottom:e.parseNumber(n.paddingBottom),topWithMargin:window.pageYOffset+i.top-e.parseNumber(n.marginTop),bottomWithMargin:window.pageYOffset+i.bottom+e.parseNumber(n.marginBottom)}}};return t}();var jQueryPlugin=window.$||window.jQuery||window.Zepto;jQueryPlugin&&(jQueryPlugin.fn.sticksy=function(t){return new Sticksy(this,t)});